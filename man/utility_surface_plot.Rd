% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ModelMetrics.R
\name{utility_surface_plot}
\alias{utility_surface_plot}
\title{Plot a Two-Threshold Utility Surface}
\usage{
utility_surface_plot(
  out,
  mode = c("contour_filled", "tile", "raster"),
  bins = 18,
  show_ridge = TRUE,
  show_best = TRUE,
  diag_line = TRUE,
  label_in_lower_triangle = TRUE
)
}
\arguments{
\item{out}{A \code{data.table} or \code{data.frame} containing the utility surface,
with columns \code{LowerThreshold}, \code{UpperThreshold}, and \code{UtilitySurface}.}

\item{mode}{Character string specifying the rendering mode:
\itemize{
  \item \code{"contour_filled"} — filled contour plot with smooth shading (default)
  \item \code{"tile"} — discrete tile heatmap
  \item \code{"raster"} — interpolated raster surface
}}

\item{bins}{Integer number of contour levels (only used when \code{mode = "contour_filled"}).}

\item{show_ridge}{Logical; if \code{TRUE}, draws the gold ridge line showing the
local maximum t₂ for each t₁.}

\item{show_best}{Logical; if \code{TRUE}, adds the black dot marking the global
maximum utility point.}

\item{diag_line}{Logical; if \code{TRUE}, adds a reference diagonal line (t₁ = t₂).}

\item{label_in_lower_triangle}{Logical; if \code{TRUE}, places the annotation box
for the global maximum in the lower triangular region (t₂ < t₁).}
}
\value{
A \code{ggplot2} object representing the styled 2D utility surface visualization.
}
\description{
Generates a 2D visualization of the two-threshold classification utility surface
produced by a dual-threshold evaluation function. The plot can show filled contours,
raster tiles, or heatmaps, with an optional ridge line of local maxima and a
highlighted global maximum point. The color scale represents model utility, allowing
visual inspection of optimal threshold combinations and their tradeoffs.
}
\details{
For each pair of thresholds (t₁, t₂), a utility value is computed (e.g., via a cost matrix).
The resulting grid of utilities is visualized as a smooth surface or contour map.
The gold ridge line identifies the best-response curve: the t₂ value that maximizes
utility for each t₁. The black dot marks the global maximum utility point.
When \code{label_in_lower_triangle = TRUE}, the annotation label is moved into the
unused lower-triangular region (where t₂ < t₁) to keep the plot visually clear.
}
\section{Visualization Features}{

\itemize{
  \item Dark theme for improved contrast.
  \item Viridis color scale for perceptually uniform utility gradients.
  \item Ridge line (gold) indicating local maxima across threshold pairs.
  \item Black dot with white halo denoting the global utility maximum.
  \item Optional annotation box positioned for clarity.
}
}

\examples{
\dontrun{
# Example using simulated data
dt <- data.table::CJ(LowerThreshold = seq(0, 1, 0.05),
                     UpperThreshold = seq(0, 1, 0.05))
dt[, UtilitySurface := exp(-(LowerThreshold - 0.3)^2 - (UpperThreshold - 0.6)^2)]

utility_surface_plot(
  out = dt,
  mode = "contour_filled",
  bins = 20,
  label_in_lower_triangle = TRUE
)
}

}
\seealso{
\code{\link{ClassificationMetrics}}, \code{\link{UtilitySurface2D}},
and \pkg{ggplot2} functions such as \code{\link[ggplot2]{geom_contour_filled}}.
}
\author{
Adrian Antico
}
\concept{Visualization}
